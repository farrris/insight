{"ast":null,"code":"var _jsxFileName = \"/Users/vladislavsderzikov/Desktop/Projects/insight/client/src/pages/chats/index.js\",\n  _s = $RefreshSig$();\nimport \"./index.css\";\nimport NavBar from \"../../components/navbar\";\nimport Container from 'react-bootstrap/Container';\nimport { useEffect, useState } from \"react\";\nimport useWebSocket, { ReadyState } from \"react-use-websocket\";\nimport ChatCard from \"../../components/chat-card\";\nimport Chat from \"../../components/chat\";\nimport checkAuth from \"../../guards/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chats() {\n  _s();\n  checkAuth();\n  const [chats, setChats] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const accessToken = localStorage.getItem(\"access\");\n  const WS_URL = 'ws://127.0.0.1:8000/ws/' + user.id + \"/chats?auth_token=\" + accessToken;\n  const socket = new WebSocket(WS_URL);\n  useEffect(() => {\n    socket.onmessage = function (event) {\n      let jsonData = JSON.parse(event.data);\n      if (jsonData.chats) {\n        setChats(jsonData.chats);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-4 d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: chats.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setSelectedChat(chat),\n          children: /*#__PURE__*/_jsxDEV(ChatCard, {\n            selectedChat: selectedChat,\n            chat: chat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 29\n          }, this)\n        }, chat.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: selectedChat ? /*#__PURE__*/_jsxDEV(Chat, {\n          chat: selectedChat\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }, this) : null\n      }, selectedChat, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n}\n_s(Chats, \"hgIS/3k+l5BSG+z2F0J3s7XZ2TM=\");\n_c = Chats;\nexport default Chats;\nvar _c;\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["NavBar","Container","useEffect","useState","useWebSocket","ReadyState","ChatCard","Chat","checkAuth","jsxDEV","_jsxDEV","Chats","_s","chats","setChats","selectedChat","setSelectedChat","user","JSON","parse","localStorage","getItem","accessToken","WS_URL","id","socket","WebSocket","onmessage","event","jsonData","data","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","chat","onClick","_c","$RefreshReg$"],"sources":["/Users/vladislavsderzikov/Desktop/Projects/insight/client/src/pages/chats/index.js"],"sourcesContent":["import \"./index.css\";\nimport NavBar from \"../../components/navbar\";\nimport Container from 'react-bootstrap/Container';\nimport { useEffect, useState} from \"react\";\nimport useWebSocket, { ReadyState } from \"react-use-websocket\"\nimport ChatCard from \"../../components/chat-card\";\nimport Chat from \"../../components/chat\";\nimport checkAuth from \"../../guards/auth\";\n\nfunction Chats() {\n    checkAuth();\n    const [chats, setChats] = useState([]);\n    const [selectedChat, setSelectedChat] = useState(null);\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const accessToken = localStorage.getItem(\"access\");\n    const WS_URL = 'ws://127.0.0.1:8000/ws/' + user.id + \"/chats?auth_token=\" + accessToken;\n    const socket = new WebSocket(WS_URL);\n    \n    useEffect(() => {\n        socket.onmessage = function(event) {\n            let jsonData = JSON.parse(event.data);\n            if (jsonData.chats) {\n                setChats(jsonData.chats);\n            }\n        };\n    }, [])\n\n    return (\n        <div>\n            <NavBar />\n            <Container className=\"mt-4 d-flex\">\n                <div>\n                    {chats.map((chat) => (\n                        <div key={chat.id} onClick={() => setSelectedChat(chat)}>\n                            <ChatCard selectedChat={selectedChat} chat={chat} />\n                        </div>\n                    ))}\n                </div>\n                <div key={selectedChat}>\n                    { selectedChat ? (\n                        <Chat chat={selectedChat} />\n                    ) : null }\n                </div>\n            </Container>\n        </div>\n    )\n}\n\nexport default Chats;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}